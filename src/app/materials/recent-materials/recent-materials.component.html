<div class="container mt-5">
  <h2>Recently Added Materials</h2>


  <div *ngIf="isLoading" class="spinner-border text-primary" role="status">
    <span class="sr-only">Loading...</span>
  </div>

  
  <div class="form-group">
    <label for="searchBy">Search by:</label>
    <select id="searchBy" class="form-control" [(ngModel)]="selectedField">
      <option value="id">ID</option>
      <option value="project">Project</option>
      <option value="partNumber">Part Number</option>
      <option value="bomLevel">BOM Level</option>
      <option value="description">Description</option>
      <option value="typeOfMaterial">Type of Material</option>
      <option value="materialSubType">Material Sub Type</option>
      <option value="color">Color</option>
      <option value="typeId">Type ID</option>
    </select>
  </div>

  <div class="form-group">
    <input
      type="text"
      class="form-control"
      [(ngModel)]="searchQuery"
      (input)="applyFilters()"
      placeholder="Search materials..."
    />
  </div>


  <table class="table table-striped" *ngIf="!isLoading && filteredMaterials.length > 0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Project</th>
        <th>Part Number</th>
        <th>BOM Level</th>
        <th>Description</th>
        <th>Type of Material</th>
        <th>Material Sub Type</th>
        <th>Color</th>
        <th>Type ID</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let material of filteredMaterials">
        <td>{{ material.id }}</td>
        <td>{{ material.project }}</td>
        <td>{{ material.partNumber }}</td>
        <td>{{ material.bomLevel }}</td>
        <td>{{ material.description }}</td>
        <td>{{ material.typeOfMaterial }}</td>
        <td>{{ material.materialSubType }}</td>
        <td>{{ material.color }}</td>
        <td>{{ material.typeId }}</td>
        <td>
          <button class="btn btn-danger btn-sm" (click)="deleteMaterial(material.id)">Delete</button>
          <button class="btn btn-warning btn-sm" (click)="editMaterial(material)">Edit</button>
        </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="!isLoading && filteredMaterials.length === 0" class="text-muted text-center mt-3">
    No materials found.
  </p>
</div>
